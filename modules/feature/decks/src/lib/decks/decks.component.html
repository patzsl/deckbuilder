<div class="container mx-auto">
  <div *ngIf="showDecks; else noDecks">
    <h1>{{ username }}'s Decks</h1>
    <ul>
      <li *ngFor="let deck of decks">
        <div (click)="deck.showCards = !deck.showCards">
          {{ deck.name }} - {{ deck.cards.length }} cartas
        </div>
        <div *ngIf="deck.showCards">
          <div *ngFor="let card of deck.cards">
            <img [src]="card.imageUrl" alt="{{ card.name }}" />
          </div>
        </div>
      </li>
    </ul>
  </div>
  <ng-template #noDecks>
    <div class="error-page">
      <div class="flex items-end justify-center">
        <h2>4</h2>
        <img src="assets/psyduck.gif" alt="Confuso Psyduck" />
        <h2 class="md:-ml-20 -ml-12">4</h2>
      </div>
      <p class="mb-4">
        <span class="text-[#FFE900]">Oops!</span> A wild Psyduck blocks your
        path. No deck? Quick thinking needed!
      </p>
      <button
        igxButton="raised"
        igxRipple="white"
        (click)="alert.open()"
        class="text-black bg-[#FFCB05] hover:bg-[#E6B800] p-2 rounded font-semibold"
      >
        Create New Deck
      </button>
    </div>
  </ng-template>

  <igx-dialog #alert [closeOnOutsideSelect]="true">
    <form [formGroup]="deckForm">
      <igx-input-group>
        <input
          igxInput
          id="deckname"
          type="text"
          placeholder="Enter your deckname"
          class="bg-transparent border rounded border-gray-400 p-3 mb-4 text-gray-400"
          formControlName="deckname"
        />
      </igx-input-group>
      <div igxDialogActions>
        <button
          igxButton
          (click)="createDeck(deckForm.value.deckname ?? '', [])"
          [disabled]="!deckForm.get('deckname')!.valid"
        >
          Create Deck
        </button>
      </div>
    </form>
  </igx-dialog>
</div>
